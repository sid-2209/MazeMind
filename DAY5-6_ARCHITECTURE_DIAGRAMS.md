# Day 5-6 Agent System Architecture Diagram

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAZE MIND ARCHITECTURE                      â”‚
â”‚                         (After Day 5-6)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            USER INPUT                                â”‚
â”‚                                                                      â”‚
â”‚  Keyboard:  W A S D / â†‘ â† â†“ â†’  |  Mouse: Wheel (zoom)              â”‚
â”‚  Space: Pause  |  R: Regenerate  |  Home: Reset Camera              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INPUT MANAGER                                 â”‚
â”‚                     (src/core/InputManager.ts)                      â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Tracks key states (pressed/released)                             â”‚
â”‚  â€¢ Tracks mouse position & wheel                                    â”‚
â”‚  â€¢ Provides clean query API                                         â”‚
â”‚                                                                      â”‚
â”‚  Methods:                                                            â”‚
â”‚    - isKeyPressed(key: string): boolean                             â”‚
â”‚    - getMovementDirection(): Direction | null                       â”‚
â”‚    - getMousePosition(): Position                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                                â”‚
                   â”‚ (movement input)               â”‚ (camera input)
                   â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    AGENT CONTROLLER          â”‚    â”‚       CAMERA            â”‚
    â”‚ (src/agent/AgentController)  â”‚    â”‚  (src/rendering/Camera) â”‚
    â”‚                              â”‚    â”‚                         â”‚
    â”‚ â€¢ Processes input            â”‚    â”‚ â€¢ Viewport management   â”‚
    â”‚ â€¢ Validates moves            â”‚    â”‚ â€¢ Pan & Zoom            â”‚
    â”‚ â€¢ Checks collisions          â”‚â—„â”€â”€â”€â”¤ â€¢ Follows agent         â”‚
    â”‚ â€¢ Commands agent             â”‚    â”‚ â€¢ Smooth interpolation  â”‚
    â”‚                              â”‚    â”‚                         â”‚
    â”‚ Methods:                     â”‚    â”‚ Methods:                â”‚
    â”‚   - update(deltaTime)        â”‚    â”‚   - followTarget()      â”‚
    â”‚   - handleMovementInput()    â”‚    â”‚   - zoom()              â”‚
    â”‚   - attemptMove()            â”‚    â”‚   - pan()               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ (move commands)
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        AGENT                               â”‚
    â”‚                   (src/agent/Agent.ts)                     â”‚
    â”‚                                                            â”‚
    â”‚  STATE:                          METHODS:                 â”‚
    â”‚  â€¢ Position (x, y)               â€¢ moveTo(target)         â”‚
    â”‚  â€¢ Facing direction              â€¢ update(deltaTime)      â”‚
    â”‚  â€¢ Movement state                â€¢ canMoveTo(tile)        â”‚
    â”‚  â€¢ Physical stats (hunger/etc)   â€¢ getPosition()          â”‚
    â”‚  â€¢ Inventory                     â€¢ getTilePosition()      â”‚
    â”‚                                                            â”‚
    â”‚  MOVEMENT LOGIC:                                           â”‚
    â”‚  â€¢ Tile-to-tile discrete movement                         â”‚
    â”‚  â€¢ Smooth interpolation (lerp)                            â”‚
    â”‚  â€¢ Speed calculation                                      â”‚
    â”‚  â€¢ Collision validation                                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                â”‚
                 â”‚ (position updates)             â”‚ (collision checks)
                 â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    AGENT RENDERER           â”‚    â”‚        MAZE           â”‚
    â”‚ (src/agent/AgentRenderer)   â”‚    â”‚  (src/maze/Maze)      â”‚
    â”‚                             â”‚    â”‚                       â”‚
    â”‚ â€¢ Visual representation     â”‚    â”‚ â€¢ Tile data          â”‚
    â”‚ â€¢ Sprite management         â”‚    â”‚ â€¢ Wall data          â”‚
    â”‚ â€¢ Animation system          â”‚    â”‚ â€¢ Entrance/Exit      â”‚
    â”‚ â€¢ Position updates          â”‚    â”‚                       â”‚
    â”‚                             â”‚    â”‚ Methods:              â”‚
    â”‚ STATES:                     â”‚    â”‚   - getTile(x, y)    â”‚
    â”‚   - IDLE (pulse)            â”‚    â”‚   - isWalkable()     â”‚
    â”‚   - WALK (bob)              â”‚    â”‚                       â”‚
    â”‚   - (future: RUN)           â”‚    â”‚                       â”‚
    â”‚                             â”‚    â”‚                       â”‚
    â”‚ SPRITE:                     â”‚    â”‚                       â”‚
    â”‚   - Simple shape (Day 5-6)  â”‚    â”‚                       â”‚
    â”‚   - Sprite sheet (Day 7+)   â”‚    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ (sprite object)
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       RENDERER                           â”‚
    â”‚                (src/rendering/Renderer.ts)               â”‚
    â”‚                                                          â”‚
    â”‚  LAYER HIERARCHY:                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
    â”‚  â”‚ World Container (Camera Transform)         â”‚         â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
    â”‚  â”‚  â”‚ Background Layer                     â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Grid (future)                     â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Patterns (future)                 â”‚ â”‚         â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
    â”‚  â”‚  â”‚ Maze Layer                           â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Tiles                             â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Walls                             â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Entrance/Exit                     â”‚ â”‚         â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
    â”‚  â”‚  â”‚ Agent Layer â—„â”€ ARTH SPRITE HERE     â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Character sprite                  â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Direction indicator               â”‚ â”‚         â”‚
    â”‚  â”‚  â”‚  â€¢ Animations                        â”‚ â”‚         â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
    â”‚  â”‚ UI Layer (No Camera Transform)             â”‚         â”‚
    â”‚  â”‚  â€¢ HUD                                      â”‚         â”‚
    â”‚  â”‚  â€¢ Status bars (future)                    â”‚         â”‚
    â”‚  â”‚  â€¢ Mini-map (future)                       â”‚         â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      PixiJS          â”‚
                    â”‚  (WebGL Rendering)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       SCREEN         â”‚
                    â”‚   (60 FPS Output)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GAME LOOP (60 FPS)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                 â”‚                 â”‚
            â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   UPDATE     â”‚  â”‚   UPDATE     â”‚  â”‚   RENDER     â”‚
    â”‚   (Logic)    â”‚  â”‚  (Animation) â”‚  â”‚  (Display)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚                 â”‚
            â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                    â”‚
    â”‚  INPUT â†’ CONTROLLER â†’ AGENT â†’ RENDERER â†’ SCREEN   â”‚
    â”‚                         â†•                          â”‚
    â”‚                       CAMERA                       â”‚
    â”‚                                                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Movement State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  IDLE   â”‚
                    â”‚ (pulse) â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚
            Input        â”‚        No input
            received     â”‚        for 0.1s
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚      Validate Move      â”‚
            â”‚   (collision check)     â”‚
            â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
               â”‚                    â”‚
          Validâ”‚                    â”‚Invalid
               â”‚                    â”‚
               â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  MOVING  â”‚         â”‚  IDLE    â”‚
        â”‚  (walk)  â”‚         â”‚ (blocked)â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Reached
              â”‚ target tile
              â”‚
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  IDLE    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Coordinate Systems

```
TILE COORDINATES (Grid Space)
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚(0,0)â”‚(1,0)â”‚(2,0)â”‚(3,0)â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚(0,1)â”‚(1,1)â”‚(2,1)â”‚(3,1)â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚(0,2)â”‚(1,2)â”‚(2,2)â”‚(3,2)â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
  Each tile = 1 unit

         â†“ Convert

WORLD COORDINATES (Pixel Space)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  0,0   â”‚ 32,0   â”‚ 64,0   â”‚ 96,0   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0,32  â”‚ 32,32  â”‚ 64,32  â”‚ 96,32  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0,64  â”‚ 32,64  â”‚ 64,64  â”‚ 96,64  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Each tile = 32 pixels

AGENT POSITION: Center of tile
  Tile (1,1) â†’ World (48, 48)
  = (1 * 32 + 16, 1 * 32 + 16)
```

## ğŸ¯ Collision Detection

```
Current Tile: (5, 5)
Moving RIGHT to (6, 5)

Step 1: Check target tile type
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚FLOORâ”‚FLOORâ”‚WALL â”‚  â† Is (6,5) a FLOOR?
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
(4,5) (5,5) (6,5)
         â””â”€â–º
         Agent

Step 2: Check wall between tiles
Current Tile (5,5):
  walls: { north: true, east: FALSE âœ“, south: true, west: true }

Target Tile (6,5):
  walls: { north: true, east: true, south: true, west: FALSE âœ“ }

Can move? âœ“ Yes (no wall blocking)

Step 3: Move agent
  fromTile: (5,5)
  toTile: (6,5)
  progress: 0 â†’ 1 over time
```

## â±ï¸ Movement Timing

```
MOVEMENT CYCLE (1 tile at baseSpeed = 1.0)

t=0.0s          t=0.5s           t=1.0s
  â”‚               â”‚                 â”‚
  â–¼               â–¼                 â–¼
[â– Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·â–¡Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·â– ]
Start          Middle            End
(5,5)                           (6,5)

Progress:
t=0.0  â†’ progress=0.0  â†’ position = start
t=0.5  â†’ progress=0.5  â†’ position = lerp(start, end, 0.5)
t=1.0  â†’ progress=1.0  â†’ position = end

With deltaTime = 0.016 (60 FPS):
  Distance per frame = 1.0 * 32 * 0.016 = 0.512 pixels
  Frames for 1 tile = 32 / 0.512 = ~62 frames = ~1 second âœ“
```

## ğŸ¨ Sprite Rendering (Day 5-6)

```
SIMPLE SPRITE (Week 1)

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Tile      â”‚
    â”‚  (32x32)    â”‚
    â”‚             â”‚
    â”‚    â•­â”€â•®      â”‚  â† Direction indicator (line)
    â”‚    â”‚ â”‚      â”‚
    â”‚   â•­â”€â”€â”€â•®     â”‚
    â”‚   â”‚ â€¢ â”‚     â”‚  â† Agent sprite (circle, 26x26)
    â”‚   â•°â”€â”€â”€â•¯     â”‚
    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SPRITE PROPERTIES:
  â€¢ Size: 26px (80% of tile)
  â€¢ Color: 0x00aaff (blue)
  â€¢ Shape: Circle or rounded square
  â€¢ Direction: White line/arrow
  â€¢ Shadow: Optional dark circle

ANIMATION STATES:
  IDLE:
    - Scale: 1.0 â†’ 1.05 â†’ 1.0 (pulse)
    - Duration: 1 second loop
  
  WALK:
    - Y offset: 0 â†’ -3 â†’ 0 â†’ +3 â†’ 0 (bob)
    - Duration: 0.5 seconds per cycle
```

## ğŸ” Camera Following

```
CAMERA SMOOTH FOLLOWING

Agent moves                Camera follows smoothly
    â”‚                           â”‚
    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Camera â”‚
â”‚Positionâ”‚   Set target    â”‚Positionâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚
     â”‚                          â”‚ Every frame:
     â”‚                          â”‚ position += (target - position) * smoothing
     â”‚                          â”‚
     â–¼                          â–¼
  (100, 200)              Lerp to (100, 200)

EXAMPLE:
Agent at:    (100, 200)
Camera at:   (80, 180)
Smoothing:   0.1 (10% per frame)

Frame 1: camera.x = 80 + (100 - 80) * 0.1 = 82
Frame 2: camera.x = 82 + (100 - 82) * 0.1 = 83.8
Frame 3: camera.x = 83.8 + (100 - 83.8) * 0.1 = 85.42
...
Eventually reaches (100, 200)
```

## ğŸ“¦ Class Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          GAME                               â”‚
â”‚                                                             â”‚
â”‚  â€¢ Owns all systems                                         â”‚
â”‚  â€¢ Coordinates game loop                                    â”‚
â”‚  â€¢ Manages state                                            â”‚
â”‚                                                             â”‚
â”‚  Has: maze, renderer, inputManager, agent,                  â”‚
â”‚       agentRenderer, agentController                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                        â”‚
       â”‚ creates & owns                         â”‚ creates & owns
       â–¼                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     AGENT        â”‚â—„â”€â”€â”€â”€â”€â”€referencesâ”€â”€â”‚ AGENT RENDERER   â”‚
â”‚                  â”‚                   â”‚                  â”‚
â”‚  â€¢ State         â”‚                   â”‚  â€¢ Sprite        â”‚
â”‚  â€¢ Position      â”‚                   â”‚  â€¢ Animation     â”‚
â”‚  â€¢ Movement      â”‚                   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                      
         â”‚ controls                             
         â”‚                                      
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            
â”‚ AGENT CONTROLLER â”‚                            
â”‚                  â”‚                            
â”‚  â€¢ Input         â”‚                            
â”‚  â€¢ Collision     â”‚                            
â”‚  â€¢ Commands      â”‚                            
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            
```

## ğŸ® Input to Output Pipeline

```
1. User presses 'W'
        â†“
2. InputManager detects keydown event
        â†“
3. AgentController.update() called
        â†“
4. Controller calls inputManager.isKeyPressed('w')
        â†“
5. Controller determines desired direction (UP)
        â†“
6. Controller checks collision: canMoveTo(x, y-1)?
        â†“
7. If valid, controller calls agent.moveTo(targetTile)
        â†“
8. Agent sets up movement:
   - fromTile = current
   - toTile = target
   - isMoving = true
   - progress = 0
        â†“
9. Game loop updates:
   - agent.update(deltaTime)
   - agent.position interpolates toward target
   - agentRenderer.update(deltaTime)
   - agentRenderer updates sprite position
   - camera.followTarget(agent.position)
        â†“
10. Renderer.render() called
        â†“
11. PixiJS draws frame
        â†“
12. User sees Arth move smoothly on screen! âœ…
```

---

**Diagram Version**: 1.0  
**Last Updated**: November 3, 2025
